<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Screw Driver System</title>
    <style>
        /* Reset CSS */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html, body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
        }
        
        body {
            padding: 0;
            margin: 0;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            background-color: #f4f4f4;
        }
        
        /* Main Dashboard Container */
        .dashboard {
    background-color: #fff;
    padding: 24px 32px 16px 32px;
    border-radius: 20px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    width: 100vw;
    height: 100vh;
    max-width: 100vw;
    max-height: 100vh;
    margin: 0;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.main-content-row {
    display: flex;
    flex: 1 1 auto;
    gap: 24px;
    align-items: stretch;
    justify-content: space-between;
    min-height: 0;
}

.scroll-table {
    flex: 1 1 0;
    min-width: 350px;
    max-width: 60%;
    height: auto;
    display: block;
}
.scroll-table table {
    width: 100%;
    display: block;
}
.scroll-table thead {
    display: table;
    width: 100%;
    table-layout: fixed;
}
.scroll-table tbody {
    display: block;
    height: 224px; /* 7 rows x 32px */
    overflow-y: auto;
    width: 100%;
}
.scroll-table tr {
    display: table;
    width: 100%;
    table-layout: fixed;
}
th, td {
    height: 32px !important;
    padding: 5px;
    font-size: 14px;
    box-sizing: border-box;
}

.image-container {
    flex: 1 1 0;
    min-width: 350px;
    max-width: 40%;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    position: relative;
}
.glow-dot {
    position: absolute;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: radial-gradient(circle, #d1a0ff 0%, #a259ff 60%, #6f1aff 100%, transparent 90%);
    box-shadow: 0 0 16px 8px #a259ff, 0 0 32px 16px #d1a0ff;
    pointer-events: none;
    z-index: 2;
    border: 2px solid #fff;
    opacity: 0.9;
}

.electrical-image {
    display: block;
    max-width: 95%;
    max-height: 420px;
    width: 100%;
    height: 420px;
    margin: 0 auto;
    border-radius: 8px;
    object-fit: contain;
}

.patterns-bottom {
    margin-bottom: 0;
    margin-top: auto;
    justify-content: flex-end;
}

.table-image-wrapper {
    flex: 1 1 auto;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 20px;
    flex-wrap: wrap;
    margin-bottom: 20px;
}
        
        /* Nokia Header */
        .nokia-header {
    display: flex;
    align-items: center;
    background: linear-gradient(to right, #9cb3e4, #1f51a7);
    padding: 10px 20px;
    border-radius: 10px;
    margin-bottom: 20px;
    position: relative;
}
.nokia-header .nokia-logo {
    height: 40px;
    margin-right: 12px;
    flex-shrink: 0;
}
.nokia-header span {
    flex: 1;
    text-align: center;
    font-size: 1.3rem;
    font-weight: bold;
    letter-spacing: 1px;
    color: #fff;
}
        
        .nokia-header img {
            height: 40px;
            max-width: 100%;
        }
        
        .datetime {
            font-weight: bold;
            color: white;
            font-size: 16px;
        }
        
        /* Header Info */
        .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    flex-wrap: wrap;
}
.header-left {
    text-align: left;
    flex: 1;
    min-width: 200px;
}
.header-center {
    text-align: center;
    flex: 1;
    min-width: 200px;
}
.header-right {
    text-align: right;
    flex: 1;
    min-width: 200px;
}
        
        /* Controls Section */
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        /* Present Screw Section */
        .present-screw {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .present-screw div {
            margin: 5px 0;
            flex: 1;
            min-width: 250px;
        }
        
        .present-screw input {
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #ddd;
            width: 100%;
            max-width: 200px;
        }
        
        /* Buttons */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            background-color: #2b4c7e;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
            margin: 5px;
            flex-grow: 1;
        }
        
        .btn:hover {
            background-color: #1f3559;
        }
        
        /* Table and Image Layout */
        .table-image-wrapper {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        /* Scrollable Table */
        .scroll-table {
    height: auto;
    min-height: unset;
    max-height: unset;
    overflow-y: visible;
    border: 1px solid #ccc;
    width: 100%;
    flex: 1;
    min-width: 300px;
}
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        thead th {
            position: sticky;
            top: 0;
            background-color: #ddd;
            z-index: 2;
        }
        
        thead tr:first-child th {
            top: 0;
            z-index: 3;
        }
        
        thead tr:nth-child(2) th {
            top: 32px;
            z-index: 2;
        }
        
        th, td {
    border: 1px solid #ccc;
    padding: 10px 0;
    text-align: center;
    height: 32px;
    vertical-align: middle;
    font-size: 15px;
}
        
        th {
    background-color: #2b4c7e;
    color: #000;
    font-size: 1.18rem;
    font-weight: bold;
    letter-spacing: 0.5px;
        .image-container {
    flex: 1;
    min-width: 350px;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
        .patterns {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 20px;
    flex-wrap: wrap;
}
.patterns-bottom {
    margin-bottom: 0;
    margin-top: 32px;
    justify-content: flex-end;
        @media screen and (max-width: 1024px) {
            .dashboard {
                max-width: 95%;
            }
        }
    }
}
        }
        
        @media screen and (max-width: 768px) {
            .header, .controls, .present-screw {
                flex-direction: column;
                align-items: stretch;
            }
            
            .header div, .controls button, .present-screw div {
                width: 100%;
                margin: 5px 0;
            }
            
            .table-image-wrapper {
                flex-direction: column;
            }
            
            .scroll-table, .image-container {
                width: 100%;
            }
            
            .nokia-header {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            
            .patterns {
                flex-direction: column;
                width: 100%;
            }
            
            .patterns button {
                width: 100%;
            }
        }
        
        @media screen and (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .dashboard {
                padding: 15px;
                border-radius: 15px;
            }
            
            .nokia-header {
                padding: 10px;
            }
            
            .datetime {
                font-size: 14px;
            }
            
            th, td {
                padding: 5px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <div class="nokia-header">
    <img src="Nokia-Logo.png" alt="Nokia Logo" class="nokia-logo">
    <span>SMART SCREW DRIVER SYSTEM</span>
</div>

        <div class="header">
    <div class="header-left"><strong>RESOURCE:</strong> MAC-LINE02</div>
    <div class="header-center"><strong>TYPE:</strong> DEPRAG-AS712</div>
    <div class="header-right"><strong>MODEL:</strong> ARCA</div>
</div>
 <div class="controls">
            <button class="btn">STATION ID</button><br><input type="text">
<button class="btn">PALETTE ID</button><br><input type="text">
<button class="btn">CHASSIS ID</button><br><input type="text">
<button class="btn" id="startStopBtn" style="background-color: red;" onclick="toggleStartStop(this)">STOP</button>
<button class="btn" id="screwDriverBtn" style="background-color: #b0b0b0; color: black;">SCREW DRIVER</button>
<button class="btn" id="plcmStatusBtn" style="background-color: #b0b0b0; color: black;">PLCM STATUS</button>
        </div>

        <div class="present-screw">
            <div><strong>PRESENT SCREW ID:</strong> <input type="number" id="presentScrewId" min="1" max="19"></div>
            <div><strong>PRESENT ANGLE:</strong> <input type="text" id="presentAngle" readonly></div>
            <div><strong>PRESENT TORQUE:</strong> <input type="text" id="presentTorque" readonly></div>
        </div>

        <div class="main-content-row">
            <div class="scroll-table">
                <table>
                    <thead>
    <tr>
        <th style="text-align:center;">Screw Count</th>
        <th style="text-align:center;" colspan="3">ANGLE</th>
        <th style="text-align:center;" colspan="3">TORQUE</th>
    </tr>
    <tr style="background:#f0f0f0; font-size:0.95em; color:#333;">
        <th></th>
        <th>Min</th><th>Max</th><th>Actual</th>
        <th>Min</th><th>Max</th><th>Actual</th>
    </tr>
</thead>
                    <tbody id="tableBody">
                    </tbody>
                </table>
            </div>
            <div class="image-container" style="position:relative;">
    <img src="imgg.jpg" alt="Electrical Component" class="electrical-image">
</div>
        </div>
        <div class="patterns patterns-bottom">
             <button class="btn" onclick="goToPage('angle')">📐 ANGLE PATTERN</button>
            <button class="btn" onclick="goToPage('torque')">🔩 TORQUE PATTERN</button>
            <button class="btn" onclick="goToPage('report')">📄 GENERATE REPORT</button>
        </div>
    </div>

    <script>
let screwData = [];
        function generateTableRows(highlightCount = 0) {
    const tableBody = document.getElementById('tableBody');
    let rows = '';
    screwData = [];
    for (let i = 1; i <= 19; i++) {
        const minAngle = 3600;
        const maxAngle = 5500;
        const minTorque = 2.1;
        const maxTorque = 2.8;
        if (highlightCount === 0) {
            // Min/max cells violet, actual cells empty with no color
            rows += `<tr>\n <td style=\"background-color:#663399;color:white;\">${i}</td>\n            <td style=\"background-color:#663399;color:white;\">${minAngle}</td>\n            <td style=\"background-color:#663399;color:white;\">${maxAngle}</td>\n            <td></td>\n            <td style=\"background-color:#663399;color:white;\">${minTorque}</td>\n            <td style=\"background-color:#663399;color:white;\">${maxTorque}</td>\n            <td></td>\n        </tr>`;
        } else if (i <= highlightCount) {
            let actualAngle, actualTorque;
            if (Math.random() < 0.8) {
                actualAngle = Math.floor(Math.random() * (maxAngle - minAngle + 1)) + minAngle;
            } else {
                actualAngle = Math.random() < 0.5 ? minAngle - Math.floor(Math.random() * 4 + 1) : maxAngle + Math.floor(Math.random() * 4 + 1);
            }
            if (Math.random() < 0.8) {
                actualTorque = Math.floor(Math.random() * (maxTorque - minTorque + 1)) + minTorque;
            } else {
                actualTorque = Math.random() < 0.5 ? minTorque - Math.floor(Math.random() * 4 + 1) : maxTorque + Math.floor(Math.random() * 4 + 1);
            }
            screwData.push({ actualAngle, actualTorque });
            let rowColor = (actualAngle >= minAngle && actualAngle <= maxAngle && actualTorque >= minTorque && actualTorque <= maxTorque) ? '#43c56e' : '#e74c3c';
            let textColor = 'white';
            rows += `<tr style=\"background-color: ${rowColor}; color: ${textColor};\">\n            <td>${i}</td>\n            <td>${minAngle}</td>\n            <td>${maxAngle}</td>\n            <td>${actualAngle}</td>\n            <td>${minTorque}</td>\n            <td>${maxTorque}</td>\n            <td>${actualTorque}</td>\n        </tr>;
        } else {
            // Min/max cells violet, actual cells empty with no color
            rows += <tr>\n            <td style=\"background-color:#663399;color:white;\">${i}</td>\n            <td style=\"background-color:#663399;color:white;\">${minAngle}</td>\n            <td style=\"background-color:#663399;color:white;\">${maxAngle}</td>\n            <td></td>\n            <td style=\"background-color:#663399;color:white;\">${minTorque}</td>\n            <td style=\"background-color:#663399;color:white;\">${maxTorque}</td>\n            <td></td>\n        </tr>`;
        }
    }
    tableBody.innerHTML = rows;
}
        function goToPage(type) {
            alert("Navigating to " + type + " page (demo only)");
        }
        function updateDateTime() {
            const now = new Date();
            const options = { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric', 
                hour: '2-digit', 
                minute: '2-digit', 
                second: '2-digit' 
            };
            document.getElementById('datetime').textContent = now.toLocaleDateString('en-GB', options);
        }

        // Toggle start/stop button
        function toggleStartStop(button) {
            const screwDriverBtn = document.getElementById('screwDriverBtn');
            const plcmStatusBtn = document.getElementById('plcmStatusBtn');
            // Default blue color for non-active
            const defaultBlue = '#2b4c7e';
            if (button.textContent === "STOP") {
                button.textContent = "START";
                button.style.backgroundColor = "green";
                // Set both to green
                screwDriverBtn.style.backgroundColor = 'green';
                plcmStatusBtn.style.backgroundColor = 'green';
                screwDriverBtn.style.color = 'white';
                plcmStatusBtn.style.color = 'white';
            } else {
                button.textContent = "STOP";
                button.style.backgroundColor = "red";
                // Set both to grey
                screwDriverBtn.style.backgroundColor = '#b0b0b0';
                plcmStatusBtn.style.backgroundColor = '#b0b0b0';
                screwDriverBtn.style.color = 'black';
                plcmStatusBtn.style.color = 'black';
            }
        }

        // Ensure initial state for SCREW DRIVER and PLCM STATUS (grey if STOP)
        function setInitialStatusButtons() {
            document.getElementById('screwDriverBtn').style.backgroundColor = '#b0b0b0';
            document.getElementById('plcmStatusBtn').style.backgroundColor = '#b0b0b0';
            document.getElementById('screwDriverBtn').style.color = 'black';
            document.getElementById('plcmStatusBtn').style.color = 'black';
        }
        // Listen for PRESENT SCREW ID input changes
    document.getElementById('presentScrewId').addEventListener('input', function(e) {
    let val = parseInt(e.target.value, 10);
    if (isNaN(val) || val < 1) val = 0;
    if (val > 19) val = 19;
    generateTableRows(val);
    // Show actual values for the selected screw row
    if (val > 0 && screwData[val - 1]) {
        document.getElementById('presentTorque').value = screwData[val - 1].actualTorque;
        document.getElementById('presentAngle').value = screwData[val - 1].actualAngle;
    } else {
        document.getElementById('presentTorque').value = '';
        document.getElementById('presentAngle').value = '';
    }
});

    // Initialize
    generateTableRows();
    updateDateTime();
    setInitialStatusButtons();
    setInterval(updateDateTime, 1000);
</script>
</body>
</html>
